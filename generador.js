//Listas de personajes

const per_animal = [
    "gato",
    "perro",
    "gallina",
    "pato",
    "ganso",
    "tortuga",
    "delfín",
    "loro",
    "hormiga",
    "alacrán",
    "mariposa",
    "gusano",
    "araña",
    "jirafa",
    "león",
    "tigre",
    "lobo",
    "chango",
    "rinoceronte",
    "pulpo",
    "tiburón",
    "ballena",
    "camarón",
    "langosta",
    "calamar"
];

const per_creatura = [
    "fantasma",
    "demonio",
    "zombie",
    "gnomo",
    "duende",
    "unicornio",
    "sirena",
    "momia",
    "vampiro",
    "hombre-lobo",
    "títere",
    "marioneta",
    "robot",
    "árbol",
    "espejo mágico",
    "hada",
    "extraterrestre",
    "alienígena",
    "centauro",
    "dragón"
];

const per_profesion_c = [
    "profesor",
    "carpintero",
    "repartidor",
    "doctor",
    "dentista",
    "enfermera",
    "abogado",
    "diseñador",
    "sastre",
    "psicólogo",
    "escritor",
    "periodista",
    "reportero",
    "psiquiatra",
    "plomero",
    "albañil",
    "piloto",
    "chofer",
    "bailarín",
    "atleta",
    "entrenador",
    "niñera",
    "policia",
    "vigilante"
];

const per_profesion_pc = [
    "ladrón",
    "samurai",
    "ninja",
    "payaso",
    "científico",
    "sacerdote",
    "soldado",
    "adivino",
    "astronauta",
    "domador",
    "exorcista",
    "quiropráctico",
    "vikingo",
    "hechicero",
    "ermitaño",
];

const per_alegria = [
    "Alegre",
    "Orgulloso",
    "Aceptado",
    "Poderoso",
    "Pacífico",
    "Íntimo",
    "Optimista",
    "Importante",
    "Confiado",
    "Respetado",
    "Realizado",
    "Provocativo",
    "Valiente",
    "Amoroso",
    "Esperanzado",
    "Sensible",
    "Juguetón",
    "Receptivo",
    "Inspirado"
]

const per_tristeza = [
    "Triste",
    "Ansioso",
    "Abandonado",
    "Desesperado",
    "Deprimido",
    "Solitario",
    "Abuirrido",
    "Anhelante",
    "Abrumado",
    "Ignorado",
    "Discriminado",
    "Importante",
    "Vulnerable",
    "Inferior",
    "Vacío",
    "Abandonado",
    "Apartado",
    "Apático",
    "Indiferente"
]

const per_disgusto = [
    "Disgustado",
    "Crítico",
    "Desaprobado",
    "Decepconado",
    "Terrible",
    "Evasivo",
    "Culpable",
    "Sarcástico",
    "Escéptico",
    "Sentencioso",
    "Aborrecido",
    "Repugnante",
    "Rebelado",
    "Repulsivo",
    "Detestable",
    "Aversivo",
    "Indeciso",
    "Atormentado",
    "Avergonzado"
]

const per_ira = [
    "Enojado",
    "Amenazado",
    "Odioso",
    "Desquiciado",
    "Agresivo",
    "Frustrado",
    "Distante",
    "Inseguro",
    "Celoso",
    "Resentido",
    "Vulnerado",
    "Enfurecido",
    "Rabioso",
    "Provocado",
    "Hostil",
    "Enfadado",
    "Irritado",
    "Retraido",
    "Sospechoso"
]

const per_miedo = [
    "Miedoso",
    "Asustado",
    "Inseguro",
    "Sumiso",
    "Rechazado",
    "humillado",
    "Herido",
    "Aterrado",
    "Espantado",
    "Pobre",
    "Inferior",
    "Indignado",
    "Insignificante",
    "Inadecuado",
    "Perturbado",
    "Irrespetado",
    "Ridiculizado",
    "Apenado",
    "Devastado"
]

const per_sorpresa = [
    "Sorpendido",
    "Interesado",
    "Sorprendido",
    "Confundido",
    "Asombrado",
    "Efusivo",
    "Jubiloso",
    "Entretenido",
    "Curioso",
    "Impresionado",
    "Consternado",
    "Desilusionado",
    "Perplejo",
    "Atónito",
    "Pasmado",
    "Inquieto",
    "Energético",
    "Liberado",
    "Eufórico"
]


const listaAdjetivos = [
    "religioso/supersticioso",
    "alegre",
    "enojado",
    "triste",
    "miedoso",
    "cobarde/asustadizo",
    "distraido",
    "olvidadizo",
    "obsesivo-compulsivo",
    "tartamudo",
    "hiper-activo",
    "borracho",
    "travieso"
]

const lug_casa = [
    "Recámara",
    "Sala",
    "Comedor",
    "Cocina",
    "Pasillo",
    "Azotea",
    "Jardín",
    "Baño",
    "Closet/Armario",
    "Sótano",
    "Estudio",
    "Balcón",
    "Escaleras",
    "Cuarto",
    "Zona de lavado/tendedero"
]

const lug_bioma = [
    "Bosque",
    "Jungla",
    "Desierto",
    "Montaña",
    "Río",
    "Cueva",
    "Caverna",
    "Lago",
    "Mar",
    "Océano",
    "Playa",
    "Cañón",
    "Tundra"
]

const lug_publico = [
    "Centro comercial",
    "Malecón",
    "Parque",
    "Ciudad",
    "Pueblo",
    "Calle",
    "Banqueta",
    "Cementerio",
    "Elevador",
    "Estadio",
    "Auditorio",
    "Cine",
    "Teatro",
    "Parque"
]

const lug_comercio = [
    "Oficina",
    "Hospital",
    "Papelería",
    "Restaurante",
    "Cantina",
    "Gimnasio",
    "Funeraria",
    "Fábrica",
    "Taller",
    "Granja",
    "Mercado",
    "Súper-mercado",
    "Laboratorio",
    "Local / Tienda",
    "Bodega",
    "Imprenta",
    "Cine mudo",
    "Cine de oro mexicano",
    "Ánime",
    "Artes marciales"
]

const lug_transporte = [
    "Camión",
    "Metro",
    "Estación",
    "Avión",
    "Aeropuerto",
    "Barco",
    "Submarino",
    "Muelle",
    "Cohete / Nave espacial",
    "Coche",
    "Taxi",
    "Carretera"
]

const lug_fantastico = [
    "Castillo",
    "Planeta",
    "Luna",
    "Asteroide",
    "Fondo del mar",
    "Interior de una persona",
    "Mansión",
    "Guarida secreta",
    "Templo"
]

const genero = [
    "Suspenso",
    "Horror",
    "Western",
    "Acción",
    "Ciencia ficción",
    "Fin del mundo",
    "Policiaco",
    "Erótico",
    "Acción",
    "Aventura",
    "Drama",
    "Documental",
    "Histórico",
    "Guerra",
    "Misterio",
    "Romántico",
    "Infantil",
    "Biográfico",
    "Musical",
    "Videojuego"
]

const sd36_titulo = [
    "1. Súplica",
    "2. Liberación / Rescate",
    "3. Vengar un crimen",
    "4. Vengar a un ser querido",
    "5. Persecución",
    "6. Desastre / Derrota",
    "7. Víctima de crueldad o desgracia",
    "8. Rebelión",
    "9. Empresa atrevida o audaz",
    "10. Secuestro",
    "11. Resolver un enigma o acertijo",
    "12. Logro o consecución",
    "13. Enemistad u odio entre parientes",
    "14. Rivalizar o competir entre parientes",
    "15. adulterio homicida",
    "16. Locura",
    "17. Negligencia o imprudencia fatal",
    "18. Incesto / Crímenes involuntarios de amor",
    "19. Matar a un pariente o familiar no reconocido",
    "20. Sacrificio por un ideal",
    "21. Sacrificarse por los parientes",
    "22. Sacrificarse todo por pasión",
    "23. Tener que sacrificar a un ser querido",
    "24. Rivalidad entre superior e inferior",
    "25. Engaño o adulterio",
    "26. Crímenes de amor",
    "27. Deshonra a un ser querido",
    "28. Obstáculo para amar.",
    "29. Amar al enemigo",
    "30. Ambición",
    "31. Conflicto con un Dios",
    "32. Celos equivocados",
    "33. Sentencia errónea / Error judicial",
    "34. Remordimiento",
    "35. Reencontrar a una persona perdida",
    "36. Luto / Pérdida del ser querido"
]

const sd36_perso = [
    ["Perseguidor", "Suplicante", "Autoridad indecisa", "Intercesor (opcional)"],
    ["Desafortunado", "Amenazador", "Salvador"],
    ["Criminal", "Vengador"],
    ["Persona culpable", "Vengador", "Víctima, cercana a los dos"],
    ["Castigo", "Fugitivo de dicho castigo"],
    ["Poder vencido", "Enemigo victorioso o mensajero"],
    ["Desafortunado", "Amo o Desgracia"],
    ["Tirano", "Conspirador/es"],
    ["Héroe audaz", "Objeto deseable", "Adversario"],
    ["Secuestrador", "Secuestrado/s", "Guardián"],
    ["Problema/Acertijo", "Interrogador", "Investigador", "Ayudante (opcional)"],
    ["Abogado/Árbitro", "Oponente que se niega"],
    ["Pariene malévolo", "Pariente odiado o que odia al malévolo recíprocamente"],
    ["Pariente preferido", "Pariente rechazado", "Objeto de la rivalidad"],
    ["Dos adúlteros", "Cónyuge traicionado"],
    ["Loco", "Víctima"],
    ["Imprudente", "Víctima u Objeto perdido"],
    ["Amante", "Amada", "Revelador"],
    ["Asesino", "Víctima no reconocida"],
    ["Héroe", "Ideal", "Persona o cosa sacrificada"],
    ["Héroe", "Pariente", "Persona o cosa sacrificada"],
    ["Amante", "Objeto de pasión fatal", "Persona o cosa sacrificada"],
    ["Héroe", "Ser querido", "Ideal superior"],
    ["Rival superior", "Rival inferior", "Objeto de la rivalidad"],
    ["Adúlteros", "Cónyuge engañado"],
    ["Dos personajes enamorados"],
    ["Descubridor", "Culpable"],
    ["Amantes", "Obstáculo"],
    ["Amante", "Enemigo amado", "Aliado odioso"],
    ["Persona ambiciosa", "Algo codiciado", "Oponente"],
    ["Humano", "Dios, un dios o algún otro poder sobrenatural"],
    ["Celoso", "Objeto del que se está celoso", "Supuesto cómplice", "Causa o autor del error"],
    ["Error", "Víctima del error", "Causa o autor del error", "Culpa"],
    ["Culpable", "Víctima o pecado", "Interrogador"],
    ["Dos personajes que se perdieron de vista"],
    ["Personaje vivo", "Personaje muerto"]
]

const sd36_descripcion = [
    "El suplicante apela al poder de la autoridad para librarse del perseguidor. El poder con autoridad puede ser alguien distinto o simplemente un atributo del perseguidor, por ejemplo, un arma suspendida en su mano. El suplicante también puede desdoblarse en perseguido y en intercesor.",
    "El desafortunado está en peligro por culpa del amenazador, pero el salvador salva a la víctima.",
    "El criminal comete un crimen impune, luego el vengador restaura la justicia castigando al criminal.",
    "El culpable y el vengador están en conflicto por cometer una falta hacia la víctima, que es cercana a ambos.",
    "El fugitivo huye del castigo por un conflicto incomprendido.",
    "El poder vencido pierde su lugar después de haber sido derrotado por el enemigo victorioso o haber sido informado de tal derrota por el mensajero.",
    "El desafortunado sufre por el amo o por la desgracia.",
    "Un personaje rebelde se alza contra la autoridad tiránica.",
    "El líder audaz conquista/obtiene el objeto deseable dominando al adversario.",
    "El secuestrador secuestra a alguien que estaba bajo la custodia del guardián.",
    "El interrogador plantea un problema al investigador y le da a éste elementos para alcanzar los objetivos de la investigación o búsqueda.",
    "El abogado reclama un objeto en posesión del oponente y luchan por tenerlo o conservarlo.  El árbitro decide quien obtiene el objeto deseado por las partes contrarias.",
    "El pariente malévolo y el pariente odiado discuten y se odian entre sí.",
    "Un personaje quiere lograr la envidiable situación de un pariente. El objeto de la rivalidad elige al pariente preferido sobre el pariente rechazado.",
    "Los dos adúlteros conspiran para matar al cónyuge traicionado.",
    "El personaje se vuelve loco y daña a la víctima o comete uno o más delitos.",
    "El imprudente, por negligencia o ignorancia, pierde el objeto o daña a la víctima.",
    "Transgresiones imposibles entre familiares o crímenes involuntarios de amor. El amante y la amada, sin saberlo, han roto un tabú al consumar su relación romántica, y el revelador los descubre.",
    "Un personaje mata a un ser querido sin saber que está cerca de él.",
    "El héroe renuncia (deja ir) a algo/alguien por un ideal.",
    "El héroe renuncia a algo/alguien con el fin de ayudar a un pariente o amigo.",
    "Un amante sacrifica una persona o cosa por el objeto de su pasión, que luego se pierde para siempre.",
    "El héroe es forzado a sacrificar a la víctima amada.",
    "Un rival superior se enfrenta a un rival inferior para ganar el objeto de rivalidad.",
    "Dos adúlteros conspiran contra un cónyuge engañado.",
    "Un amante comete un crimen por amor.",
    "El descubridor descubre la fechoría o acto reprobable cometido por el culpable.",
    "Dos amantes se enfrentan juntos a un obstáculo. (Familia, sociedad, enfermedad, etc.)",
    "Un personaje comienza a amar a su enemigo mientras que su aliado odioso odia a ese enemigo.",
    "La persona ambiciosa está dispuesta a hacer cualquier cosa para conquistar lo codiciado y es combatida por el oponente.",
    "El humano entra en conflicto con Dios o con un dios para satisfacer su ambición.",
    "El celoso, víctima de la causa o del autor del error, se vuelve celoso del objeto y entra en conflicto con el supuesto cómplice.",
    "Un personaje es víctima de un error de juicio (realizado por la causa o el autor de este error) y es injustamente acusado y / o condenado, en lugar del culpable.",
    "El perpetrador daña a la víctima o comete una falta o un crimen, luego siente remordimiento y no está de acuerdo con un interrogador que busca comprender la situación.",
    "Una persona busca y encuentra a otro personaje después de una larga separación.",
    "El personaje vivo debe llorar al muerto. O, el vivo ve a otro personaje asesinar a un personaje que ama."
]

//==================================================================================
//==================================================================================

//===================
// Elemento aleatorio
//===================

function obtener_elemento_aleatorio(array) {

    elemento_seleccionado = array[Math.floor(Math.random() * array.length)]

    if (typeof elemento_seleccionado === "undefined") {
        return "";
    }

    return elemento_seleccionado;

}

//=========
// Lista UL
//=========

function ListaUL(array) {
    // Crear lista
    var elementosUL = document.createElement('ul');

    for (var i = 0; i < array.length; i++) {
        // Añadir viñeta
        var elemento = document.createElement('li');

        // Poner elemento
        elemento.appendChild(document.createTextNode(array[i]));
        elementosUL.appendChild(elemento);
    }

    // Devuelve lista UL
    return elementosUL;
}

//=========
// Lista BR
//=========

function ListaBR(array) {

    // Crea una cadena vacía
    let lista = "";

    // Cicla el arreglo
    for (let i = 0; i < array.length; i++) {

        // Añade el elemento y el tag <br> a la lista
        lista += array[i] + "<br>";
    }

    // Devuelve lista BR
    return lista;
}


//==================================================================================
//==================================================================================

function generar_personaje() {

    // Crear contenedores vacíos

    const lista_PerTipo = [];
    const lista_PerActividad = [];
    const lista_PerDescripcion = [];

    //Poblar lista de Tipos

    if (document.getElementById('cb_per_animal').checked) {
        lista_PerTipo.push(...per_animal);
    }

    if (document.getElementById('cb_per_creatura').checked) {
        lista_PerTipo.push(...per_creatura);
    }

    //Poblar lista de Actividades

    if (document.getElementById('cb_per_profesion_c').checked) {
        lista_PerActividad.push(...per_profesion_c);
    }

    if (document.getElementById('cb_per_profesion_pc').checked) {
        lista_PerActividad.push(...per_profesion_pc);
    }

    // Poblar lista de Descriptores

    if (document.getElementById('cb_per_alegria').checked) {
        lista_PerDescripcion.push(...per_alegria);
    }

    if (document.getElementById('cb_per_tristeza').checked) {
        lista_PerDescripcion.push(...per_tristeza);
    }

    if (document.getElementById('cb_per_disgusto').checked) {
        lista_PerDescripcion.push(...per_disgusto);
    }

    if (document.getElementById('cb_per_ira').checked) {
        lista_PerDescripcion.push(...per_ira);
    }

    if (document.getElementById('cb_per_miedo').checked) {
        lista_PerDescripcion.push(...per_miedo);
    }

    if (document.getElementById('cb_per_sorpresa').checked) {
        lista_PerDescripcion.push(...per_sorpresa);
    }

    //Generar personajes

    personaje = obtener_elemento_aleatorio(lista_PerTipo);
    personaje += " " + obtener_elemento_aleatorio(lista_PerActividad);
    personaje += " " + obtener_elemento_aleatorio(lista_PerDescripcion);

    personaje = personaje.toLowerCase();
    personaje = personaje.trim();
    personaje = personaje.charAt(0).toUpperCase() + personaje.slice(1);

    document.getElementById("tx_personaje").value = personaje;

}

//==============
// GENERAR LUGAR
//==============

function generar_lugar() {

    const listaLugares = [];

    if (document.getElementById('cb_lug_casa').checked) {
        listaLugares.push(...lug_casa);
    }

    if (document.getElementById('cb_lug_bioma').checked) {
        listaLugares.push(...lug_bioma);
    }

    if (document.getElementById('cb_lug_publico').checked) {
        listaLugares.push(...lug_publico);
    }

    if (document.getElementById('cb_lug_comercio').checked) {
        listaLugares.push(...lug_comercio);
    }

    if (document.getElementById('cb_lug_transporte').checked) {
        listaLugares.push(...lug_transporte);
    }

    if (document.getElementById('cb_lug_fantastico').checked) {
        listaLugares.push(...lug_fantastico);
    }

    lugar_generado = obtener_elemento_aleatorio(listaLugares);
    document.getElementById("tx_lugar").value = lugar_generado;
}

//===============
// GENERAR GÉNERO
//===============

function generar_genero() {

    const listaGenero = [];

    listaGenero.push(...genero);

    genero_generado = obtener_elemento_aleatorio(listaGenero);
    document.getElementById("tx_genero").value = genero_generado;
}

//============================
// GENERAR SITUACIÓN DRAMÁTICA
//============================

function generar_sidra() {

    num = Math.floor(Math.random() * 36);

    sidra_titulo = sd36_titulo[num];
    sidra_personajes = ListaUL(sd36_perso[num]);
    sidra_descripcion = sd36_descripcion[num];

    document.getElementById("sidra_titulo").innerHTML = sidra_titulo;

    document.getElementById("sidra_personajes").innerHTML = "";
    document.getElementById("sidra_personajes").appendChild(sidra_personajes);

    document.getElementById("sidra_descripcion").innerHTML = sidra_descripcion;
}

function agregar_a_tarjeta(seccion) {

    // Obtiene el DIV que contendrá las tarjetas
    let div_contenedor = document.getElementById("contenedor_tarjetas");

    // Crea un nuevo elemento DIV
    let div = document.createElement("div");

    // Genera un ID único para el DIV
    let divId = "tarjeta-" + Date.now();
    div.id = divId;

    // Añade el DIV al DIC contenedor
    div_contenedor.appendChild(div);

    // Agrega una clase al DIV para usar con CSS
    div.classList.add("tarjeta_" + seccion);

    //Tralsada el contenido HTML del DIV local al DIV de la Tarjeta
    let texto_origen = document.getElementById("tx_" + seccion);
    var texto_a_tarjeta = texto_origen.value;
    div.innerHTML = "<img src='img/eliminar.svg' alt='eliminar' class = 'eliminar' width = '16px' height='16px' onclick='eliminar_div.call(this)'></img>" + texto_a_tarjeta

    //Actualiza etiqueta de confirmación
    const etiqueta = document.getElementById("lbl_" + seccion);
    etiqueta.textContent = "Se agregó '" + texto_a_tarjeta + "' a la tarjeta.";

}

function agregar_div_tarjeta(seccion, elemento_titulo) {

    // Obtiene el DIV que contendrá las tarjetas
    let div_contenedor = document.getElementById("contenedor_tarjetas");

    // Crea un nuevo elemento DIV
    let div = document.createElement("div");

    // Genera un ID único para el DIV
    let divId = "tarjeta-" + Date.now();
    div.id = divId;

    // Añade el DIV al DIC contenedor
    div_contenedor.appendChild(div);

    // Agrega una clase al DIV para usar con CSS
    div.classList.add("tarjeta_" + seccion);

    //Tralsada el contenido HTML del DIV local al DIV de la Tarjeta
    let div_a_tarjeta = document.getElementById("div_" + seccion).innerHTML;
    div.innerHTML = "<img src='img/eliminar.svg' alt='eliminar' class = 'eliminar' width = '16px' height='16px' onclick='eliminar_div.call(this)'></img><br>" + div_a_tarjeta

    //Actualiza etiqueta de confirmación
    const etiqueta = document.getElementById("lbl_" + seccion);
    let texto_a_tarjeta = document.getElementById(elemento_titulo).innerHTML;
    etiqueta.textContent = "Se agregó '" + texto_a_tarjeta + "' a la tarjeta.";

}

function eliminar_div() {

    // Ubicar botón
    let button = this;

    // Obtener padre del botón
    let div = button.parentNode;

    // Eliminar al padre
    div.parentNode.removeChild(div);
}

function vaciar_tarjeta() {

    let div = document.getElementById("contenedor_tarjetas");

    div.innerHTML = ""
}